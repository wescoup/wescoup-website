<!doctype html>
<html>
  <head><meta charset="utf-8"><title>Socket.IO Test</title></head>
  <body>
    <h1>Socket.IO Test</h1>
    <pre id="log"></pre>

    <!-- Heroku serves the client from the Flask-SocketIO package -->
    <!-- replace your old script tag with this one -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" crossorigin="anonymous"></script>

    <script>
      const log = (m) => (document.body.innerHTML += `<pre>${m}</pre>`);
      const socket = io({ transports: ["websocket", "polling"] }); // same origin
    
      socket.on("connect", () => log("connected: " + socket.id));
      socket.on("server_msg", d => log("server_msg: " + JSON.stringify(d)));
      socket.on("pong", d => log("pong: " + JSON.stringify(d)));
    
      setTimeout(() => socket.emit("ping", { hello: "world" }), 500);
    </script>

  </body>
</html>
